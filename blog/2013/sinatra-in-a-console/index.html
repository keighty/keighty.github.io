
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sinatra in a Console - keighty</title>
  <meta name="author" content="katie leonard">

  
  <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://keighty.github.io/blog/2013/sinatra-in-a-console">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="keighty" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">keighty</a></h1>
  
    <h2>a portfolio of sorts</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:keighty.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sinatra in a Console</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-22T00:00:00-07:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Sinatra does not have a default console like rails does. If you are writing in a rails environment and need to test out a helper method, or want to check on the state of a record in the database, dropping down into the rails console is as easy as typing:</p>

<div>
  <pre><code class='bash'>$ rails c</code></pre>
</div>


<p>How can we achieve the same ability in Sinatra?</p>

<h3>Tux</h3>

<p>Tux is a ruby gem that generates a sinatra console. It reads the config.ru, allows you to interact with App methods, and provides empty request and response objects to for investigating communication between views and the Sinatra controller.</p>

<p>Add Tux to your Gemfile:</p>

<div>
  <pre><code class='ruby'>group :development, :test do
  ...
  gem &#39;tux&#39;
end</code></pre>
</div>


<p>Don&rsquo;t forget to bundle!</p>

<p>At the command line, start up tux and use rack.actions to view all the methods available:</p>

<div>
  <pre><code class='bash'>$ tux
Loading development environment (Rack 1.2)
&gt;&gt; rack.actions
=&gt; [:request, :get, :post, :put, :patch, :delete, :options, :head, :follow_redirect!, :header, :set_cookie, :clear_cookies, :authorize, :basic_authorize, :digest_authorize, :last_response, :last_request]
&gt;&gt;</code></pre>
</div>


<p>You can access any method from your application as well.
Of course, if you are working in Sinatra, you probably want to go as lightweight as possible, which is why you can also use:</p>

<h3>Basic irb</h3>

<p>It is as simple as using irb and requiring your main app file. You have access to all the dependencies and files that your application does by simply requiring that one file. You can check state, call methods, create objects, whatever you need:</p>

<div>
  <pre><code class='bash'>$ irb
&gt; require &#39;./app.rb&#39;
 =&gt; true
&gt; User.all
D, [2013-07-22T15:47:49.230146 #54081] DEBUG -- :   User Load (0.2ms)  SELECT &quot;users&quot;.* FROM &quot;users&quot;
 =&gt; #&lt;ActiveRecord::Relation [#&lt;User id: 1, name: &quot;Gordon Shumway&quot;, email: &quot;gordon@example.com&quot;, created_at: &quot;2013-07-22 22:45:48&quot;, updated_at: &quot;2013-07-22 22:45:48&quot;&gt;, #&lt;User id: 2, name: &quot;Fanny Eubanks&quot;, email: &quot;fanny@example.com&quot;, created_at: &quot;2013-07-22 22:45:48&quot;, updated_at: &quot;2013-07-22 22:45:48&quot;&gt;]&gt;
&gt;</code></pre>
</div>


<p>This can be called even more elegantly at the command line:</p>

<div>
  <pre><code class='bash'>$ irb -r ./app.rb</code></pre>
</div>


<p>or through a Rake task:</p>

<div>
  <pre><code class='bash'>desc &quot;run irb console&quot;
task :console, :environment do |t, args|
  ENV[&#39;RACK_ENV&#39;] = args[:environment] || &#39;development&#39;
  exec &quot;irb -r irb/completion -r ./app.rb&quot;
end</code></pre>
</div>


<p>Awesome</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">katie leonard</span></span>

      








  


<time datetime="2013-07-22T00:00:00-07:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/sinatra/'>sinatra</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://keighty.github.io/blog/2013/sinatra-in-a-console/" data-via="" data-counturl="http://keighty.github.io/blog/2013/sinatra-in-a-console/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/get-your-kicks-on-localhost4567/" title="Previous Post: Get your kicks on route localhost:4567">&laquo; Get your kicks on route localhost:4567</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/git-picking/" title="Next Post: Git-Picking">Git-Picking &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/factoring-in-nests/">Factoring in Nests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/partial-to-ajax/">Partial to Ajax</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/meatier-apps-with-meteor/">Meatier Apps With Meteor</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/rails-depends-on-javascript/">Rails, You Can Depend on Javascript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/ruby-execution/">Ruby Execution</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/thor-sets-up-a-project/">Thor Sets Up a Project</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/argf-all-you-want/">ARGF All You Want</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/hammer-out-tasks-with-thor/">Hammer-out Tasks With Thor</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/serving-some-java/">Serving Some Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/runtime-for-your-life/">Runtime for Your Life</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - katie leonard -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
